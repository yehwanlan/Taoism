# ğŸ“Š è³‡æ–™æµç¨‹èªªæ˜

é“æ•™ç¶“å…¸ç¿»è­¯ç³»çµ± v2.0 çš„å®Œæ•´è³‡æ–™è™•ç†æµç¨‹

## ğŸ”„ æ•´é«”è³‡æ–™æµç¨‹

```mermaid
graph TD
    A[ç¶²ç«™URL] --> B[crawler/ çˆ¬èŸ²ç³»çµ±]
    B --> C[docs/source_texts/ åŸæ–‡æª”æ¡ˆ]
    C --> D[core/translator.py ç¿»è­¯å¼•æ“]
    D --> E[docs/translations/ ç¿»è­¯æª”æ¡ˆ]
    E --> F[core/tracker.py è¿½è¹¤ç³»çµ±]
    F --> G[data/tracking/ è¿½è¹¤è³‡æ–™]
    G --> H[update_web_data.py ç¶²é æ›´æ–°]
    H --> I[docs/index.html ç¶²é å±•ç¤º]
    
    C --> J[core/file_monitor.py æª”æ¡ˆç›£æ§]
    J --> K[data/logs/ æ“ä½œæ—¥èªŒ]
```

## ğŸ“ ç›®éŒ„çµæ§‹èˆ‡è³‡æ–™é—œä¿‚

### è¼¸å…¥è³‡æ–™
```
crawler/                    # çˆ¬èŸ²å·¥å…·é›†
â”œâ”€â”€ shidian_simple.py      # ä¸»è¦çˆ¬èŸ²å·¥å…·
â”œâ”€â”€ base_crawler.py        # åŸºç¤çˆ¬èŸ²å¼•æ“
â””â”€â”€ ...                    # å…¶ä»–å°ˆæ¥­çˆ¬èŸ²
```

### è™•ç†æ ¸å¿ƒ
```
core/                      # æ ¸å¿ƒè™•ç†æ¨¡çµ„
â”œâ”€â”€ translator.py          # ç¿»è­¯å¼•æ“ï¼ˆèª¿ç”¨çˆ¬èŸ²ï¼‰
â”œâ”€â”€ tracker.py             # è¿½è¹¤ç³»çµ±ï¼ˆè¨˜éŒ„è³‡æ–™ï¼‰
â””â”€â”€ file_monitor.py        # æª”æ¡ˆç›£æ§ï¼ˆè¨˜éŒ„æ“ä½œï¼‰
```

### è¼¸å‡ºè³‡æ–™
```
docs/                      # æœ€çµ‚è¼¸å‡º
â”œâ”€â”€ source_texts/          # çˆ¬å–çš„åŸæ–‡
â”‚   â””â”€â”€ æ›¸å_ID/
â”‚       â”œâ”€â”€ README.md      # æ›¸ç±èªªæ˜
â”‚       â””â”€â”€ åŸæ–‡/
â”‚           â””â”€â”€ *.txt      # ç« ç¯€åŸæ–‡
â”œâ”€â”€ translations/          # ç”Ÿæˆçš„ç¿»è­¯
â”‚   â””â”€â”€ æ›¸å_ID/
â”‚       â””â”€â”€ *.md          # ç« ç¯€ç¿»è­¯æ¨¡æ¿
â””â”€â”€ index.html            # ç¶²é å±•ç¤ºä»‹é¢
```

### è¿½è¹¤è³‡æ–™
```
data/                      # ç³»çµ±è³‡æ–™
â”œâ”€â”€ tracking/              # è¿½è¹¤è³‡æ–™
â”‚   â”œâ”€â”€ classics.json     # ç¶“å…¸è³‡æ–™åº«
â”‚   â””â”€â”€ tracking_report.md # è¿½è¹¤å ±å‘Š
â””â”€â”€ logs/                 # æ“ä½œæ—¥èªŒ
    â”œâ”€â”€ file_operations.json # æª”æ¡ˆæ“ä½œè¨˜éŒ„
    â””â”€â”€ activity_report.md   # æ´»å‹•å ±å‘Š
```

## ğŸ”§ é—œéµè™•ç†è…³æœ¬

### 1. ä¸»è¦ç¿»è­¯æµç¨‹
```bash
# ä½¿ç”¨è€…åŸ·è¡Œ
python main.py translate --book "æ›¸ç±URL"

# å…§éƒ¨æµç¨‹
main.py â†’ tools/easy_cli.py â†’ core/translator.py â†’ crawler/shidian_simple.py
```

### 2. è³‡æ–™è¿½è¹¤æµç¨‹
```python
# core/translator.py ä¸­çš„è‡ªå‹•è¿½è¹¤
def save_source_text(self, content_data, chapter_number):
    # 1. å„²å­˜æª”æ¡ˆ
    with open(file_path, 'w', encoding='utf-8') as f:
        f.write(content)
    
    # 2. è¨˜éŒ„æª”æ¡ˆæ“ä½œ
    self.file_monitor.track_file_write(file_path, "source_text")
    
    # 3. æ›´æ–°è¿½è¹¤ç³»çµ±
    self.tracker.track_new_classic(book_info, chapters, ...)
```

### 3. ç¶²é è³‡æ–™æ›´æ–°æµç¨‹
```bash
# è‡ªå‹•æ›´æ–°ç¶²é è³‡æ–™
python update_web_data.py

# å…§éƒ¨æµç¨‹ï¼š
# 1. æƒæ docs/source_texts/ ç›®éŒ„
# 2. æå–æ›¸ç±å’Œç« ç¯€è³‡è¨Š
# 3. æ›´æ–° docs/js/script.js ä¸­çš„è³‡æ–™çµæ§‹
# 4. ç”Ÿæˆ docs/web_data_report.md å ±å‘Š
```

## ğŸ“‹ è©³ç´°è™•ç†æ­¥é©Ÿ

### æ­¥é©Ÿ1: çˆ¬å–åŸæ–‡
```
è¼¸å…¥: æ›¸ç±URL (å¦‚ https://www.shidianguji.com/book/DZ0001)
è™•ç†: crawler/shidian_simple.py
è¼¸å‡º: docs/source_texts/æ›¸å_ID/åŸæ–‡/*.txt
è¨˜éŒ„: data/logs/file_operations.json
```

### æ­¥é©Ÿ2: ç”Ÿæˆç¿»è­¯æ¨¡æ¿
```
è¼¸å…¥: docs/source_texts/æ›¸å_ID/åŸæ–‡/*.txt
è™•ç†: core/translator.py
è¼¸å‡º: docs/translations/æ›¸å_ID/*.md
è¨˜éŒ„: data/tracking/classics.json
```

### æ­¥é©Ÿ3: æ›´æ–°è¿½è¹¤ç³»çµ±
```
è¼¸å…¥: æ–°å¢çš„æª”æ¡ˆå’Œè³‡æ–™
è™•ç†: core/tracker.py
è¼¸å‡º: data/tracking/tracking_report.md
è¨˜éŒ„: çµ±è¨ˆè³‡è¨Šå’Œé€²åº¦
```

### æ­¥é©Ÿ4: æ›´æ–°ç¶²é è³‡æ–™
```
è¼¸å…¥: docs/source_texts/ å’Œ docs/translations/
è™•ç†: update_web_data.py
è¼¸å‡º: æ›´æ–° docs/js/script.js
è¨˜éŒ„: docs/web_data_report.md
```

## ğŸ” è³‡æ–™é©—è­‰æµç¨‹

### è‡ªå‹•é©—è­‰
```python
# åœ¨ core/translator.py ä¸­
def validate_data(self):
    # 1. æª¢æŸ¥åŸæ–‡æª”æ¡ˆå®Œæ•´æ€§
    # 2. é©—è­‰ç¿»è­¯æ¨¡æ¿æ ¼å¼
    # 3. ç¢ºèªè¿½è¹¤è³‡æ–™ä¸€è‡´æ€§
    # 4. æª¢æŸ¥ç¶²é è³‡æ–™åŒæ­¥
```

### æ‰‹å‹•é©—è­‰
```bash
# æª¢æŸ¥ç³»çµ±ç‹€æ…‹
python main.py info

# æª¢æŸ¥è¿½è¹¤å ±å‘Š
python main.py monitor dashboard

# æª¢æŸ¥ç¶²é è³‡æ–™
python update_web_data.py
```

## ğŸ”„ è³‡æ–™åŒæ­¥æ©Ÿåˆ¶

### è‡ªå‹•åŒæ­¥
- **æª”æ¡ˆå¯«å…¥æ™‚**: è‡ªå‹•è¨˜éŒ„åˆ° file_monitor
- **æ–°å¢ç¶“å…¸æ™‚**: è‡ªå‹•æ›´æ–° tracker
- **ç³»çµ±å•Ÿå‹•æ™‚**: è‡ªå‹•æª¢æŸ¥è³‡æ–™ä¸€è‡´æ€§

### æ‰‹å‹•åŒæ­¥
```bash
# é‡æ–°æƒææ‰€æœ‰è³‡æ–™
python tools/migrate_data.py

# æ›´æ–°ç¶²é è³‡æ–™
python update_web_data.py

# ç”Ÿæˆæœ€æ–°å ±å‘Š
python main.py monitor reports
```

## ğŸ“Š è³‡æ–™æ ¼å¼è¦ç¯„

### åŸæ–‡æª”æ¡ˆæ ¼å¼
```
æª”å: 01_ç« ç¯€æ¨™é¡Œ.txt
å…§å®¹: ç´”æ–‡å­—ï¼ŒUTF-8 ç·¨ç¢¼
çµæ§‹: # æ¨™é¡Œ + å…§å®¹
```

### ç¿»è­¯æª”æ¡ˆæ ¼å¼
```
æª”å: 01_ç« ç¯€æ¨™é¡Œ.md
å…§å®¹: Markdown æ ¼å¼
çµæ§‹: 
# æ¨™é¡Œ
## åŸæ–‡
[åŸæ–‡å…§å®¹]
## ç¿»è­¯
[ç¿»è­¯å…§å®¹]
## è¨»è§£
[è¨»è§£å…§å®¹]
```

### è¿½è¹¤è³‡æ–™æ ¼å¼
```json
{
  "metadata": {
    "created": "ISOæ™‚é–“æˆ³",
    "version": "2.0",
    "total_classics": æ•¸å­—
  },
  "classics": {
    "æ›¸ç±ID": {
      "book_info": {...},
      "chapters": [...],
      "translation_status": {...}
    }
  }
}
```

## ğŸ› ï¸ é–‹ç™¼è€…æŒ‡å—

### æ–°å¢è³‡æ–™è™•ç†åŠŸèƒ½
1. åœ¨ `core/` ä¸­å»ºç«‹æ–°çš„è™•ç†æ¨¡çµ„
2. åœ¨ `tools/` ä¸­å»ºç«‹å°æ‡‰çš„CLIå·¥å…·
3. æ›´æ–° `main.py` ä¸­çš„å‘½ä»¤è·¯ç”±
4. æ›´æ–°ç›¸é—œæ–‡æª”

### ä¿®æ”¹è³‡æ–™çµæ§‹
1. æ›´æ–°å°æ‡‰çš„æ ¸å¿ƒæ¨¡çµ„
2. åŸ·è¡Œè³‡æ–™é·ç§»è…³æœ¬
3. æ›´æ–°ç¶²é è³‡æ–™çµæ§‹
4. æ¸¬è©¦æ‰€æœ‰ç›¸é—œåŠŸèƒ½

### é™¤éŒ¯è³‡æ–™æµç¨‹
1. æª¢æŸ¥ `data/logs/` ä¸­çš„æ“ä½œæ—¥èªŒ
2. æŸ¥çœ‹ `data/tracking/` ä¸­çš„è¿½è¹¤è³‡æ–™
3. ä½¿ç”¨ `python main.py monitor dashboard` æª¢æŸ¥ç‹€æ…‹
4. æª¢æŸ¥ç€è¦½å™¨æ§åˆ¶å°çš„ç¶²é éŒ¯èª¤

---

*è³‡æ–™æµç¨‹èªªæ˜ - é“æ•™ç¶“å…¸ç¿»è­¯ç³»çµ± v2.0* ğŸ“Šâœ¨