<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ‹œæ‹œå¥½æ—¥å­æ¸¬è©¦</title>
    <style>
        body {
            font-family: 'Microsoft JhengHei', sans-serif;
            padding: 20px;
            line-height: 1.6;
        }
        .test-result {
            background: #f5f5f5;
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }
        .good { border-left-color: #4caf50; background: #e8f5e8; }
        .bad { border-left-color: #f44336; background: #ffebee; }
        .neutral { border-left-color: #ff9800; background: #fff8e1; }
    </style>
</head>
<body>
    <h1>ğŸ—“ï¸ æ‹œæ‹œå¥½æ—¥å­æ¸¬è©¦</h1>
    
    <div style="background: #fff3cd; border: 1px solid #ffeaa7; padding: 15px; margin: 20px 0; border-radius: 8px;">
        <h3 style="color: #856404; margin-top: 0;">âš ï¸ é‡è¦èªªæ˜</h3>
        <p style="color: #856404; margin-bottom: 0;">
            <strong>æ­¤å·¥å…·è¨ˆç®—çš„æ˜¯ã€æ—¥å¹²æ”¯ã€‘ï¼Œä¸æ˜¯å¹´å¹²æ”¯ï¼</strong><br>
            â€¢ æ—¥å¹²æ”¯ï¼šæ¯æ—¥çš„å¤©å¹²åœ°æ”¯ï¼Œ60å¤©ä¸€å€‹å¾ªç’°ï¼Œç”¨æ–¼æ‹œæ‹œæ“‡æ—¥<br>
            â€¢ å¹´å¹²æ”¯ï¼šæ¯å¹´çš„å¤©å¹²åœ°æ”¯ï¼Œ60å¹´ä¸€å€‹å¾ªç’°ï¼Œå¦‚2024å¹´ç”²è¾°å¹´
        </p>
    </div>
    
    <div id="today-result" class="test-result">
        <h3>ä»Šæ—¥æ—¥å¹²æ”¯è³‡è¨Š</h3>
        <div id="today-info">è¼‰å…¥ä¸­...</div>
    </div>
    
    <div class="test-result">
        <h3>åŸºæº–æ—¥æœŸå’Œé€£çºŒæ€§æ¸¬è©¦</h3>
        <p style="color: #666; font-size: 0.9em;">é©—è­‰åŸºæº–æ—¥æœŸå’Œå…­åç”²å­å¾ªç’°çš„æ­£ç¢ºæ€§</p>
        <div id="test-dates">è¼‰å…¥ä¸­...</div>
    </div>
    
    <div class="test-result">
        <h3>è‡ªå®šç¾©æ—¥æœŸæ¸¬è©¦</h3>
        <p style="color: #666; font-size: 0.9em;">è¼¸å…¥ä»»æ„æ—¥æœŸæŸ¥è©¢å…¶æ—¥å¹²æ”¯å’Œæ‹œæ‹œå®œå¿Œ</p>
        <input type="date" id="custom-date" value="2024-01-01">
        <button onclick="testCustomDate()" style="margin-left: 10px; padding: 5px 15px;">æŸ¥è©¢æ—¥å¹²æ”¯</button>
        <div id="custom-result" style="margin-top: 10px;"></div>
    </div>

    <script src="js/fortune.js"></script>
    <script>
        // æ¸¬è©¦ä»Šæ—¥
        function testToday() {
            const todayFortune = fortuneChecker.getTodayFortune();
            const todayInfo = document.getElementById('today-info');
            const todayResult = document.getElementById('today-result');
            
            // åŸ·è¡Œé©—è­‰
            fortuneChecker.validateStemBranch();
            
            todayInfo.innerHTML = `
                <strong>${todayFortune.date}</strong><br>
                å¤©å¹²åœ°æ”¯: <strong>${todayFortune.stemBranch}</strong><br>
                ç‹€æ…‹: <strong>${fortuneChecker.getStatusText(todayFortune.status)}</strong><br>
                èªªæ˜: ${todayFortune.description}<br><br>
                
                <details>
                    <summary>ğŸ“Š è¨ˆç®—éç¨‹è©³æƒ…</summary>
                    <div style="margin-top: 10px; font-size: 0.9em; color: #666;">
                        <strong>${todayFortune.calculationInfo.type}</strong><br>
                        åŸºæº–æ—¥æœŸ: ${todayFortune.calculationInfo.baseDate}<br>
                        åŸºæº–å„’ç•¥æ—¥æ•¸: ${todayFortune.calculationInfo.baseJDN}<br>
                        ç›®æ¨™å„’ç•¥æ—¥æ•¸: ${todayFortune.calculationInfo.targetJDN}<br>
                        å¤©æ•¸å·®: ${todayFortune.calculationInfo.daysDiff} å¤©<br>
                        è¨ˆç®—å…¬å¼: ${todayFortune.calculationInfo.calculation}<br>
                        å…­åç”²å­ç´¢å¼•: ${todayFortune.calculationInfo.stemBranchIndex}<br>
                        å¤©å¹²ç´¢å¼•: ${todayFortune.calculationInfo.stemIndex} (${fortuneChecker.stemBranch.stems[todayFortune.calculationInfo.stemIndex]})<br>
                        åœ°æ”¯ç´¢å¼•: ${todayFortune.calculationInfo.branchIndex} (${fortuneChecker.stemBranch.branches[todayFortune.calculationInfo.branchIndex]})<br>
                        <em style="color: #e53e3e;">${todayFortune.calculationInfo.note}</em>
                    </div>
                </details>
            `;
            
            todayResult.classList.add(todayFortune.status);
        }
        
        // æ¸¬è©¦å¹¾å€‹ç‰¹å®šæ—¥æœŸ
        function testSpecificDates() {
            const testDates = [
                new Date(2025, 0, 1),  // 2025å¹´1æœˆ1æ—¥
                new Date(2025, 0, 15), // 2025å¹´1æœˆ15æ—¥
                new Date(2025, 1, 1),  // 2025å¹´2æœˆ1æ—¥
                new Date(2025, 1, 14), // 2025å¹´2æœˆ14æ—¥
                new Date(2025, 2, 1),  // 2025å¹´3æœˆ1æ—¥
            ];
            
            const testDatesDiv = document.getElementById('test-dates');
            let html = '';
            
            testDates.forEach(date => {
                const stemBranch = fortuneChecker.getStemBranch(date);
                const fortune = fortuneChecker.fortuneData[stemBranch];
                const status = fortune ? fortune.status : 'neutral';
                const description = fortune ? fortune.description : 'è³‡æ–™ä¸è©³';
                
                const year = date.getFullYear();
                const month = String(date.getMonth() + 1).padStart(2, '0');
                const day = String(date.getDate()).padStart(2, '0');
                
                html += `
                    <div class="test-result ${status}" style="margin: 5px 0; padding: 10px;">
                        <strong>${year}å¹´${month}æœˆ${day}æ—¥</strong> - ${stemBranch}æ—¥<br>
                        ${fortuneChecker.getStatusText(status)}: ${description}
                    </div>
                `;
            });
            
            testDatesDiv.innerHTML = html;
        }
        
        // æ¸¬è©¦è‡ªå®šç¾©æ—¥æœŸ
        function testCustomDate() {
            const dateInput = document.getElementById('custom-date');
            const resultDiv = document.getElementById('custom-result');
            
            if (!dateInput.value) {
                resultDiv.innerHTML = '<span style="color: red;">è«‹é¸æ“‡æ—¥æœŸ</span>';
                return;
            }
            
            const selectedDate = new Date(dateInput.value);
            const stemBranch = fortuneChecker.getStemBranch(selectedDate);
            const fortune = fortuneChecker.fortuneData[stemBranch];
            const status = fortune ? fortune.status : 'neutral';
            const description = fortune ? fortune.description : 'è³‡æ–™ä¸è©³';
            const calculationInfo = fortuneChecker.getCalculationInfo(selectedDate);
            
            resultDiv.innerHTML = `
                <div class="test-result ${status}" style="margin: 10px 0; padding: 15px;">
                    <strong>${selectedDate.toLocaleDateString()}</strong> - <strong>${stemBranch}</strong>æ—¥<br>
                    ç‹€æ…‹: ${fortuneChecker.getStatusText(status)}<br>
                    èªªæ˜: ${description}<br><br>
                    
                    <details>
                        <summary>è¨ˆç®—éç¨‹</summary>
                        <div style="margin-top: 10px; font-size: 0.9em; color: #666;">
                            åŸºæº–æ—¥æœŸ: ${calculationInfo.baseDate}<br>
                            å¤©æ•¸å·®: ${calculationInfo.daysDiff} å¤©<br>
                            è¨ˆç®—: ${calculationInfo.calculation}<br>
                            çµæœ: ${fortuneChecker.stemBranch.stems[calculationInfo.stemIndex]}${fortuneChecker.stemBranch.branches[calculationInfo.branchIndex]}
                        </div>
                    </details>
                </div>
            `;
        }
        
        // é é¢è¼‰å…¥å®Œæˆå¾ŒåŸ·è¡Œæ¸¬è©¦
        document.addEventListener('DOMContentLoaded', () => {
            testToday();
            testSpecificDates();
        });
    </script>
</body>
</html>