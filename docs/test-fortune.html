<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ‹œæ‹œå¥½æ—¥å­æ¸¬è©¦</title>
    <style>
        body {
            font-family: 'Microsoft JhengHei', sans-serif;
            padding: 20px;
            line-height: 1.6;
        }
        .test-result {
            background: #f5f5f5;
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }
        .good { border-left-color: #4caf50; background: #e8f5e8; }
        .bad { border-left-color: #f44336; background: #ffebee; }
        .neutral { border-left-color: #ff9800; background: #fff8e1; }
    </style>
</head>
<body>
    <h1>ğŸ—“ï¸ æ‹œæ‹œå¥½æ—¥å­æ¸¬è©¦</h1>
    
    <div id="today-result" class="test-result">
        <h3>ä»Šæ—¥è³‡è¨Š</h3>
        <div id="today-info">è¼‰å…¥ä¸­...</div>
    </div>
    
    <div class="test-result">
        <h3>æ¸¬è©¦å¹¾å€‹å·²çŸ¥æ—¥æœŸ</h3>
        <div id="test-dates">è¼‰å…¥ä¸­...</div>
    </div>

    <script src="js/fortune.js"></script>
    <script>
        // æ¸¬è©¦ä»Šæ—¥
        function testToday() {
            const todayFortune = fortuneChecker.getTodayFortune();
            const todayInfo = document.getElementById('today-info');
            const todayResult = document.getElementById('today-result');
            
            // åŸ·è¡Œé©—è­‰
            fortuneChecker.validateStemBranch();
            
            todayInfo.innerHTML = `
                <strong>${todayFortune.date}</strong><br>
                å¤©å¹²åœ°æ”¯: <strong>${todayFortune.stemBranch}</strong><br>
                ç‹€æ…‹: <strong>${fortuneChecker.getStatusText(todayFortune.status)}</strong><br>
                èªªæ˜: ${todayFortune.description}<br><br>
                
                <details>
                    <summary>ğŸ“Š è¨ˆç®—éç¨‹è©³æƒ…</summary>
                    <div style="margin-top: 10px; font-size: 0.9em; color: #666;">
                        Julian Day Number: ${todayFortune.calculationInfo.julianDayNumber}<br>
                        è·é›¢å…¬å…ƒ1å¹´å¤©æ•¸: ${todayFortune.calculationInfo.daysSinceEpoch}<br>
                        å…­åç”²å­ç´¢å¼•: ${todayFortune.calculationInfo.stemBranchIndex}<br>
                        å¤©å¹²ç´¢å¼•: ${todayFortune.calculationInfo.stemIndex} (${fortuneChecker.stemBranch.stems[todayFortune.calculationInfo.stemIndex]})<br>
                        åœ°æ”¯ç´¢å¼•: ${todayFortune.calculationInfo.branchIndex} (${fortuneChecker.stemBranch.branches[todayFortune.calculationInfo.branchIndex]})
                    </div>
                </details>
            `;
            
            todayResult.classList.add(todayFortune.status);
        }
        
        // æ¸¬è©¦å¹¾å€‹ç‰¹å®šæ—¥æœŸ
        function testSpecificDates() {
            const testDates = [
                new Date(2025, 0, 1),  // 2025å¹´1æœˆ1æ—¥
                new Date(2025, 0, 15), // 2025å¹´1æœˆ15æ—¥
                new Date(2025, 1, 1),  // 2025å¹´2æœˆ1æ—¥
                new Date(2025, 1, 14), // 2025å¹´2æœˆ14æ—¥
                new Date(2025, 2, 1),  // 2025å¹´3æœˆ1æ—¥
            ];
            
            const testDatesDiv = document.getElementById('test-dates');
            let html = '';
            
            testDates.forEach(date => {
                const stemBranch = fortuneChecker.getStemBranch(date);
                const fortune = fortuneChecker.fortuneData[stemBranch];
                const status = fortune ? fortune.status : 'neutral';
                const description = fortune ? fortune.description : 'è³‡æ–™ä¸è©³';
                
                const year = date.getFullYear();
                const month = String(date.getMonth() + 1).padStart(2, '0');
                const day = String(date.getDate()).padStart(2, '0');
                
                html += `
                    <div class="test-result ${status}" style="margin: 5px 0; padding: 10px;">
                        <strong>${year}å¹´${month}æœˆ${day}æ—¥</strong> - ${stemBranch}æ—¥<br>
                        ${fortuneChecker.getStatusText(status)}: ${description}
                    </div>
                `;
            });
            
            testDatesDiv.innerHTML = html;
        }
        
        // é é¢è¼‰å…¥å®Œæˆå¾ŒåŸ·è¡Œæ¸¬è©¦
        document.addEventListener('DOMContentLoaded', () => {
            testToday();
            testSpecificDates();
        });
    </script>
</body>
</html>