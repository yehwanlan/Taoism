<!DOCTYPE html>
<html lang="zh-Hant">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="format-detection" content="telephone=no">
    <title>é“æ•™ç¶“å…¸ç¿»è­¯ç³»çµ± v2.0</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</head>

<body>
    <div id="password-overlay">
        <div class="password-box">
            <h2>è«‹è¼¸å…¥å¯†èª</h2>
            <p>ç¦ç”Ÿç„¡é‡å¤©å°Š</p>
            <input type="text" id="password-input" placeholder="åœ¨æ­¤è¼¸å…¥..." autocomplete="off" autocorrect="off"
                autocapitalize="off" spellcheck="false">
            <button id="password-submit">é€²å…¥</button>
            <p id="password-error" class="error-message"></p>
        </div>
    </div>

    <div id="main-content">
        <header>
            <h1>ğŸ›ï¸ é“æ•™ç¶“å…¸ç¿»è­¯ç³»çµ± v2.0</h1>
            <div class="system-info">
                <span id="system-stats">è¼‰å…¥ä¸­...</span>
                <div id="daily-fortune" class="daily-fortune">
                    <span id="fortune-info">ğŸ—“ï¸ è¼‰å…¥ä»Šæ—¥æ‹œæ‹œè³‡è¨Š...</span>
                    <div style="font-size: 0.75em; margin-top: 0.3rem; opacity: 0.8;">
                        â€» åŸºæ–¼æ—¥å¹²æ”¯è¨ˆç®—ï¼Œ60å¤©å¾ªç’°
                    </div>
                </div>
            </div>
        </header>

        <nav class="main-nav">
            <div class="nav-section">
                <h3>ğŸ“š é¸æ“‡ç¶“å…¸</h3>
                <select id="book-select">
                    <option value="">è«‹é¸æ“‡ç¶“å…¸...</option>
                </select>
            </div>

            <div class="nav-section">
                <h3>ğŸ“– é¸æ“‡ç« ç¯€</h3>
                <select id="chapter-select" disabled>
                    <option value="">è«‹å…ˆé¸æ“‡ç¶“å…¸</option>
                </select>
            </div>

            <div class="nav-section legacy-section">
                <h3>ğŸ“œ èˆŠç‰ˆç¶“å…¸</h3>
                <select id="legacy-select">
                    <option value="">é¸æ“‡èˆŠç‰ˆç¶“å…¸...</option>
                </select>
            </div>

            <div class="nav-controls">
                <button id="prev-chapter" disabled>â¬…ï¸ ä¸Šä¸€ç« </button>
                <button id="next-chapter" disabled>ä¸‹ä¸€ç«  â¡ï¸</button>
                <button id="toggle-view">ğŸ”„ åˆ‡æ›é¡¯ç¤ºæ¨¡å¼</button>
            </div>
        </nav>

        <main>
            <div class="content-header">
                <h2 id="current-title">é“æ•™ç¶“å…¸ç¿»è­¯ç³»çµ±</h2>
                <div class="content-info">
                    <span id="content-stats"></span>
                </div>
            </div>

            <div class="text-container" id="text-container">
                <div class="translated-text">
                    <h3>ğŸ“ ç¾ä»£ä¸­æ–‡ç¿»è­¯</h3>
                    <div id="translated-content">
                        <div class="welcome-message">
                            <h4>æ­¡è¿ä½¿ç”¨é“æ•™ç¶“å…¸ç¿»è­¯ç³»çµ± v2.0</h4>
                            <p>ğŸ¯ <strong>åŠŸèƒ½ç‰¹è‰²ï¼š</strong></p>
                            <ul>
                                <li>ğŸ“š <strong>23éƒ¨ç¶“å…¸</strong> - åŒ…å«188å€‹ç« ç¯€ï¼Œè±å¯Œçš„é“æ•™å…¸ç±</li>
                                <li>ğŸ” <strong>æ™ºèƒ½é¸æ“‡</strong> - æ›¸ç±å’Œç« ç¯€é›™é‡é¸æ“‡ç³»çµ±</li>
                                <li>ğŸ“– <strong>å°ç…§é–±è®€</strong> - åŸæ–‡èˆ‡è­¯æ–‡ä¸¦æ’é¡¯ç¤º</li>
                                <li>ğŸ›ï¸ <strong>å¤šç¨®æ¨¡å¼</strong> - æ”¯æ´ä¸åŒçš„é–±è®€æ¨¡å¼</li>
                                <li>ğŸ“œ <strong>å‘å¾Œç›¸å®¹</strong> - ä¿ç•™èˆŠç‰ˆç¶“å…¸å­˜å–</li>
                            </ul>
                            <p>è«‹å¾ä¸Šæ–¹é¸æ“‡ç¶“å…¸é–‹å§‹é–±è®€ã€‚</p>
                        </div>
                    </div>
                </div>
                <div class="original-text">
                    <h3>ğŸ“œ å¤æ–‡åŸæ–‡</h3>
                    <div id="original-content">
                        <div class="welcome-message">
                            <h4>ç³»çµ±èªªæ˜</h4>
                            <p>ğŸ›ï¸ <strong>ä¸»è¦æ”¶éŒ„ç¶“å…¸ï¼š</strong></p>
                            <ul>
                                <li><strong>å—è¯çœŸç¶“å£ç¾©</strong> - 71ç« ï¼ˆèŠå­è¨»è§£ï¼‰</li>
                                <li><strong>æŠ±æœ´å­ï¼ˆæŠ±æœ´å­å…§ç¯‡ï¼‰</strong> - 38ç« ï¼ˆè‘›æ´ªè‘—ä½œï¼‰</li>
                                <li><strong>å¤ªä¸Šæ´ç„éˆå¯¶æ¥­å ±å› ç·£ç¶“</strong> - 27ç« </li>
                                <li><strong>æ´ç„éˆå¯¶è‡ªç„¶ä¹å¤©ç”Ÿç¥ç« ç¶“</strong> - 16ç« </li>
                                <li><strong>å…ƒå§‹å¤©å°Šèªªåä¸€æ›œå¤§æ¶ˆç½ç¥å’’ç¶“</strong> - 15ç« </li>
                                <li><strong>å…¶ä»–ç¶“å…¸</strong> - 19éƒ¨å–®ç« ç¶“å…¸</li>
                            </ul>
                            <p>ğŸ“Š <strong>çµ±è¨ˆè³‡è¨Šï¼š</strong> ç¸½è¨ˆ23éƒ¨ç¶“å…¸ï¼Œ188å€‹ç« ç¯€</p>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <footer>
            <div class="footer-content">
                <p>&copy; 2025 é“æ•™ç¶“å…¸ç¿»è­¯ç³»çµ± v2.0. All rights reserved.</p>
                <div class="footer-links">
                    <a href="https://github.com/your-repo/taoism-translation" target="_blank">ğŸ“‚ GitHub</a>
                    <a href="#" onclick="showSystemInfo()">â„¹ï¸ ç³»çµ±è³‡è¨Š</a>
                    <a href="#" onclick="showHelp()">â“ ä½¿ç”¨èªªæ˜</a>
                    <a href="calendar.html" target="_blank">ğŸ“… è¬å¹´æ›†</a>
                    <a href="deity-birthday.html" target="_blank">ğŸ® ç¥æ˜è–èª•</a>
                    <a href="api-test.html" target="_blank">ğŸ”Œ APIæ¸¬è©¦</a>
                    <a href="å…­åç”²å­å®Œæ•´è¡¨.md" target="_blank">ğŸ“Š å®Œæ•´å°ç…§è¡¨</a>
                    <a href="å¤©å¹²åœ°æ”¯è¨ˆç®—èªªæ˜.md" target="_blank">ğŸ—“ï¸ è¨ˆç®—èªªæ˜</a>
                    <a href="test-fortune.html" target="_blank">ğŸ§ª åŠŸèƒ½æ¸¬è©¦</a>
                    <a href="test-deity.html" target="_blank">ğŸ§ª ç¥æ˜æ¸¬è©¦</a>
                </div>
            </div>
        </footer>
    </div>

    <!-- è¼‰å…¥ JavaScript æ¨¡çµ„ -->
    <script src="js/lunar-calendar.js"></script>
    <script src="js/fortune.js"></script>
    <script src="js/script.js"></script>
    
    <!-- åˆå§‹åŒ–è¾²æ›†å’Œæ‹œæ‹œè³‡è¨Š -->
    <script>
        // ç¢ºä¿ DOM è¼‰å…¥å®Œæˆå¾Œåˆå§‹åŒ–
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initializeFortune);
        } else {
            initializeFortune();
        }
        
        function initializeFortune() {
            try {
                // åˆå§‹åŒ–è¾²æ›†ç³»çµ±
                const lunarCalendar = new LunarCalendar();
                
                // åˆå§‹åŒ–æ‹œæ‹œå¥½æ—¥å­ç³»çµ±
                const fortuneChecker = new FortuneChecker();
                
                // æ›´æ–°ä»Šæ—¥æ‹œæ‹œè³‡è¨Š
                updateTodayFortune(lunarCalendar, fortuneChecker);
            } catch (error) {
                console.error('åˆå§‹åŒ–è¾²æ›†åŠŸèƒ½å¤±æ•—:', error);
                // é¡¯ç¤ºéŒ¯èª¤è¨Šæ¯
                const fortuneInfo = document.getElementById('fortune-info');
                if (fortuneInfo) {
                    fortuneInfo.innerHTML = 'âš ï¸ è¾²æ›†åŠŸèƒ½è¼‰å…¥å¤±æ•—';
                }
            }
        }
        
        function updateTodayFortune(lunarCalendar, fortuneChecker) {
            const fortuneInfo = document.getElementById('fortune-info');
            const dailyFortune = document.getElementById('daily-fortune');
            
            if (!fortuneInfo || !dailyFortune) return;
            
            try {
                const today = new Date();
                
                // ç²å–è¾²æ›†æ—¥æœŸ
                const lunar = lunarCalendar.solarToLunar(
                    today.getFullYear(),
                    today.getMonth() + 1,
                    today.getDate()
                );
                
                // ç²å–æ—¥å¹²æ”¯å’Œæ‹œæ‹œè³‡è¨Š
                const todayFortune = fortuneChecker.getTodayFortune();
                
                // æ ¼å¼åŒ–è¾²æ›†æ—¥æœŸ
                const lunarDateStr = lunarCalendar.formatLunarDate(lunar);
                
                // çµ„åˆé¡¯ç¤ºå…§å®¹
                let displayText = `${todayFortune.emoji} ${todayFortune.date} ${todayFortune.stemBranch}æ—¥<br>`;
                displayText += `ğŸŒ™ è¾²æ›†ï¼š${lunarDateStr}<br>`;
                displayText += `${fortuneChecker.getStatusText(todayFortune.status)}<br>`;
                displayText += `<small>${todayFortune.description}</small>`;
                
                // æ›´æ–°å…§å®¹
                fortuneInfo.innerHTML = displayText;
                
                // æ›´æ–°æ¨£å¼
                dailyFortune.className = `daily-fortune fortune-${todayFortune.status}`;
                
            } catch (error) {
                console.error('æ›´æ–°æ‹œæ‹œè³‡è¨Šå¤±æ•—:', error);
                fortuneInfo.innerHTML = 'âš ï¸ ç„¡æ³•è¼‰å…¥ä»Šæ—¥è³‡è¨Š';
            }
        }
    </script>
</body>

</html>