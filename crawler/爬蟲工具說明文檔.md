# é“æ•™ç¶“å…¸ç¿»è­¯å°ˆæ¡ˆ - çˆ¬èŸ²å·¥å…·èªªæ˜æ–‡æª”

## ğŸ“ ç›®éŒ„çµæ§‹æ¦‚è¦½

```
crawler/
â”œâ”€â”€ ğŸ“‹ èªªæ˜æ–‡æª”
â”‚   â”œâ”€â”€ çˆ¬èŸ²å·¥å…·èªªæ˜æ–‡æª”.md      # æœ¬æ–‡æª”
â”‚   â”œâ”€â”€ README.md                # åŸºç¤èªªæ˜
â”‚   â””â”€â”€ practical_guide.md       # å¯¦ç”¨æŒ‡å—
â”‚
â”œâ”€â”€ ğŸ”§ æ ¸å¿ƒçˆ¬èŸ²å¼•æ“
â”‚   â”œâ”€â”€ base_crawler.py          # çˆ¬èŸ²åŸºç¤é¡åˆ¥
â”‚   â”œâ”€â”€ taoism_crawler.py        # é“æ•™ç¶“å…¸å°ˆç”¨çˆ¬èŸ²
â”‚   â””â”€â”€ api_crawler.py           # APIé€†å‘å·¥ç¨‹çˆ¬èŸ²
â”‚
â”œâ”€â”€ ğŸŒ ç¶²ç«™å°ˆç”¨çˆ¬èŸ²
â”‚   â”œâ”€â”€ shidian_simple.py        # åå…¸å¤ç±ç¶²ç°¡åŒ–ç‰ˆï¼ˆæ¨è–¦ï¼‰
â”‚   â”œâ”€â”€ shidian_crawler.py       # åå…¸å¤ç±ç¶²å®Œæ•´ç‰ˆ
â”‚   â””â”€â”€ baopuzi_crawler.py       # æŠ±æœ´å­å°ˆç”¨çˆ¬èŸ²
â”‚
â”œâ”€â”€ ğŸ” åˆ†æå·¥å…·
â”‚   â”œâ”€â”€ page_analyzer.py         # ç¶²é çµæ§‹åˆ†æå™¨
â”‚   â”œâ”€â”€ url_finder.py            # URLæœå°‹å·¥å…·
â”‚   â””â”€â”€ smart_crawler.py         # æ™ºèƒ½å…§å®¹æå–å™¨
â”‚
â”œâ”€â”€ ğŸš€ é€²éšå·¥å…·
â”‚   â”œâ”€â”€ selenium_crawler.py      # å‹•æ…‹ç¶²é çˆ¬èŸ²
â”‚   â”œâ”€â”€ final_solution.py        # æœ€çµ‚è§£æ±ºæ–¹æ¡ˆ
â”‚   â””â”€â”€ run_crawler.py           # å‘½ä»¤åˆ—æ§åˆ¶å™¨
â”‚
â”œâ”€â”€ ğŸ§ª æ¸¬è©¦å’Œç¤ºä¾‹
â”‚   â”œâ”€â”€ demo.py                  # åŸºç¤ç¤ºä¾‹
â”‚   â”œâ”€â”€ improved_demo.py         # æ”¹é€²ç¤ºä¾‹
â”‚   â””â”€â”€ debug_*.txt              # èª¿è©¦æª”æ¡ˆ
â”‚
â””â”€â”€ âš™ï¸ é…ç½®å’Œä¾è³´
    â”œâ”€â”€ requirements.txt         # Pythonä¾è³´å¥—ä»¶
    â””â”€â”€ crawler.log             # é‹è¡Œæ—¥èªŒ
```

## ğŸ¯ æ ¸å¿ƒå·¥å…·è©³è§£

### 1. åŸºç¤çˆ¬èŸ²å¼•æ“

#### `base_crawler.py` - çˆ¬èŸ²åŸºç¤é¡åˆ¥
**åŠŸèƒ½**ï¼šæä¾›æ‰€æœ‰çˆ¬èŸ²çš„åŸºç¤åŠŸèƒ½
**ç‰¹è‰²**ï¼š
- âœ… HTTPè«‹æ±‚è™•ç†å’Œé‡è©¦æ©Ÿåˆ¶
- âœ… ä¸­æ–‡ç·¨ç¢¼è‡ªå‹•è™•ç†
- âœ… éš¨æ©ŸUser-Agentå’Œå»¶é²
- âœ… å®Œæ•´çš„æ—¥èªŒè¨˜éŒ„ç³»çµ±
- âœ… éŒ¯èª¤è™•ç†å’Œç•°å¸¸æ•ç²

**ä½¿ç”¨å ´æ™¯**ï¼šä½œç‚ºå…¶ä»–çˆ¬èŸ²çš„çˆ¶é¡åˆ¥

#### `taoism_crawler.py` - é“æ•™ç¶“å…¸å°ˆç”¨çˆ¬èŸ²
**åŠŸèƒ½**ï¼šå°ˆé–€è™•ç†é“æ•™ç¶“å…¸æ–‡æœ¬
**ç‰¹è‰²**ï¼š
- âœ… å¤æ–‡æ–‡æœ¬æ¸…ç†å’Œæ ¼å¼åŒ–
- âœ… é“æ•™è¡“èªè­˜åˆ¥å’Œä¿è­·
- âœ… çµæ§‹åŒ–è³‡æ–™å„²å­˜
- âœ… æ‰¹é‡è™•ç†å¤šå€‹ç¶“å…¸

**ä½¿ç”¨å ´æ™¯**ï¼šè™•ç†å‚³çµ±é“æ•™ç¶²ç«™çš„ç¶“å…¸æ–‡æœ¬

#### `api_crawler.py` - APIé€†å‘å·¥ç¨‹çˆ¬èŸ²
**åŠŸèƒ½**ï¼šç›´æ¥èª¿ç”¨ç¶²ç«™APIç²å–æ•¸æ“š
**ç‰¹è‰²**ï¼š
- âœ… è‡ªå‹•åˆ†æURLçµæ§‹
- âœ… APIç«¯é»è‡ªå‹•ç™¼ç¾
- âœ… JSONæ•¸æ“šè§£æ
- âœ… ç¹éå‰ç«¯é™åˆ¶

**ä½¿ç”¨å ´æ™¯**ï¼šè™•ç†ç¾ä»£SPAç¶²ç«™çš„å‹•æ…‹å…§å®¹

### 2. ç¶²ç«™å°ˆç”¨çˆ¬èŸ²

#### `shidian_simple.py` - åå…¸å¤ç±ç¶²ç°¡åŒ–ç‰ˆ â­ **æ¨è–¦**
**åŠŸèƒ½**ï¼šå°ˆé–€çˆ¬å–åå…¸å¤ç±ç¶²å…§å®¹çš„æœ€ä½³è§£æ±ºæ–¹æ¡ˆ
**ç‰¹è‰²**ï¼š
- âœ… è‡ªå‹•è­˜åˆ¥æ›¸ç±å’Œç« ç¯€ID
- âœ… å¤šAPIç«¯é»è‡ªå‹•å˜—è©¦
- âœ… HTMLå…§å®¹æ™ºèƒ½è§£æ
- âœ… ä¸­æ–‡å…§å®¹å“è³ªé©—è­‰
- âœ… ç°¡å–®æ˜“ç”¨çš„ä»‹é¢

**ä½¿ç”¨æ–¹æ³•**ï¼š
```python
from shidian_simple import ShidianSimple

crawler = ShidianSimple()
success = crawler.crawl(url, "è¼¸å‡ºæª”å")
```

#### `shidian_crawler.py` - åå…¸å¤ç±ç¶²å®Œæ•´ç‰ˆ
**åŠŸèƒ½**ï¼šåŠŸèƒ½æ›´å®Œæ•´çš„åå…¸å¤ç±ç¶²çˆ¬èŸ²
**ç‰¹è‰²**ï¼š
- âœ… å®Œæ•´çš„éŒ¯èª¤è™•ç†
- âœ… è©³ç´°çš„é€²åº¦å ±å‘Š
- âœ… å¤šç¨®å…§å®¹æå–ç­–ç•¥
- âœ… å¯é…ç½®çš„åƒæ•¸è¨­å®š

#### `baopuzi_crawler.py` - æŠ±æœ´å­å°ˆç”¨çˆ¬èŸ²
**åŠŸèƒ½**ï¼šå°ˆé–€è™•ç†æŠ±æœ´å­å„ç« ç¯€
**ç‰¹è‰²**ï¼š
- âœ… ç« ç¯€è‡ªå‹•ç·¨è™Ÿ
- âœ… æ¨™é¡Œè‡ªå‹•æå–
- âœ… æª”æ¡ˆåç¨±è‡ªå‹•æ¸…ç†
- âœ… å°ˆæ¡ˆçµæ§‹è‡ªå‹•å»ºç«‹

### 3. åˆ†æå·¥å…·

#### `page_analyzer.py` - ç¶²é çµæ§‹åˆ†æå™¨
**åŠŸèƒ½**ï¼šæ·±åº¦åˆ†æç¶²é çµæ§‹ï¼Œæ‰¾å‡ºå…§å®¹æå–ç­–ç•¥
**ç‰¹è‰²**ï¼š
- âœ… DOMçµæ§‹è©³ç´°åˆ†æ
- âœ… JavaScriptè¼‰å…¥æª¢æ¸¬
- âœ… CSSé¡åˆ¥çµ±è¨ˆåˆ†æ
- âœ… å…§å®¹å®¹å™¨è‡ªå‹•è­˜åˆ¥

**ä½¿ç”¨å ´æ™¯**ï¼šåˆ†ææ–°ç¶²ç«™æ™‚çš„ç¬¬ä¸€æ­¥å·¥å…·

#### `url_finder.py` - URLæœå°‹å·¥å…·
**åŠŸèƒ½**ï¼šè‡ªå‹•æœå°‹å’Œé©—è­‰ç›¸é—œç¶²å€
**ç‰¹è‰²**ï¼š
- âœ… é—œéµå­—è‡ªå‹•æœå°‹
- âœ… ç¶²å€æœ‰æ•ˆæ€§é©—è­‰
- âœ… å…§å®¹å“è³ªè©•ä¼°
- âœ… æ‰¹é‡URLè™•ç†

#### `smart_crawler.py` - æ™ºèƒ½å…§å®¹æå–å™¨
**åŠŸèƒ½**ï¼šä½¿ç”¨å¤šç¨®ç­–ç•¥æ™ºèƒ½æå–å…§å®¹
**ç‰¹è‰²**ï¼š
- âœ… å¤šç­–ç•¥å…§å®¹æå–
- âœ… å¤æ–‡ç‰¹å¾µè‡ªå‹•è­˜åˆ¥
- âœ… å…§å®¹å“è³ªè‡ªå‹•è©•ä¼°
- âœ… åŸå§‹HTMLä¿å­˜ä¾›èª¿è©¦

### 4. é€²éšå·¥å…·

#### `selenium_crawler.py` - å‹•æ…‹ç¶²é çˆ¬èŸ²
**åŠŸèƒ½**ï¼šè™•ç†JavaScriptæ¸²æŸ“çš„å‹•æ…‹å…§å®¹
**ç‰¹è‰²**ï¼š
- âœ… çœŸå¯¦ç€è¦½å™¨æ¨¡æ“¬
- âœ… å‹•æ…‹å…§å®¹ç­‰å¾…æ©Ÿåˆ¶
- âœ… å¤šç¨®å…§å®¹é¸æ“‡å™¨
- âœ… ç„¡é ­æ¨¡å¼æ”¯æ´

**æ³¨æ„**ï¼šéœ€è¦å®‰è£Chromeç€è¦½å™¨å’ŒChromeDriver

#### `final_solution.py` - æœ€çµ‚è§£æ±ºæ–¹æ¡ˆ
**åŠŸèƒ½**ï¼šæ•´åˆå¤šç¨®æŠ€è¡“çš„ç¶œåˆè§£æ±ºæ–¹æ¡ˆ
**ç‰¹è‰²**ï¼š
- âœ… å¤šç¨®çˆ¬èŸ²æŠ€è¡“æ•´åˆ
- âœ… è‡ªå‹•é¸æ“‡æœ€ä½³ç­–ç•¥
- âœ… å®Œæ•´çš„éŒ¯èª¤æ¢å¾©
- âœ… è©³ç´°çš„èª¿è©¦è³‡è¨Š

#### `run_crawler.py` - å‘½ä»¤åˆ—æ§åˆ¶å™¨
**åŠŸèƒ½**ï¼šæä¾›å‘½ä»¤åˆ—ä»‹é¢æ§åˆ¶æ‰€æœ‰çˆ¬èŸ²
**ç‰¹è‰²**ï¼š
- âœ… çµ±ä¸€çš„å‘½ä»¤åˆ—ä»‹é¢
- âœ… é…ç½®æª”æ¡ˆæ”¯æ´
- âœ… æ‰¹é‡è™•ç†æ¨¡å¼
- âœ… é€²åº¦è¿½è¹¤å’Œå ±å‘Š

## ğŸš€ å¿«é€Ÿé–‹å§‹æŒ‡å—

### 1. ç’°å¢ƒè¨­å®š
```bash
# å®‰è£ä¾è³´
pip install -r requirements.txt

# æª¢æŸ¥å®‰è£
python -c "import requests, bs4; print('âœ… åŸºç¤å¥—ä»¶å®‰è£æˆåŠŸ')"
```

### 2. åŸºæœ¬ä½¿ç”¨

#### çˆ¬å–å–®ä¸€é é¢ï¼ˆæ¨è–¦æ–¹æ³•ï¼‰
```python
from shidian_simple import ShidianSimple

crawler = ShidianSimple()
url = "https://www.shidianguji.com/book/SBCK109/chapter/1j70ybwytkcak_1"
success = crawler.crawl(url, "æŠ±æœ´å­_ç¬¬ä¸€ç« ")

if success:
    print("âœ… çˆ¬å–æˆåŠŸï¼")
```

#### ä½¿ç”¨å‘½ä»¤åˆ—å·¥å…·
```bash
# é©—è­‰ç¶²å€
python run_crawler.py --mode validate --url "ç¶²å€"

# çˆ¬å–å…§å®¹
python run_crawler.py --mode crawl --config crawler_config.json
```

#### åˆ†ææ–°ç¶²ç«™
```python
from page_analyzer import PageAnalyzer

analyzer = PageAnalyzer()
result = analyzer.deep_analyze("æ–°ç¶²ç«™URL")
```

### 3. é€²éšä½¿ç”¨

#### æ‰¹é‡è™•ç†
```python
from baopuzi_crawler import BaopuziCrawler

crawler = BaopuziCrawler()
chapters = [
    {'number': 1, 'title': 'ç« ç¯€1', 'url': 'URL1'},
    {'number': 2, 'title': 'ç« ç¯€2', 'url': 'URL2'},
]

for chapter in chapters:
    crawler.crawl_chapter(chapter['url'], chapter['number'])
```

#### å‹•æ…‹å…§å®¹è™•ç†
```python
from selenium_crawler import SeleniumCrawler

crawler = SeleniumCrawler(headless=True)
success = crawler.crawl_dynamic_page(url, "æ¨™é¡Œ")
crawler.close()
```

## ğŸ› ï¸ å·¥å…·é¸æ“‡æŒ‡å—

### æ ¹æ“šç¶²ç«™é¡å‹é¸æ“‡

| ç¶²ç«™é¡å‹ | æ¨è–¦å·¥å…· | å‚™é¸æ–¹æ¡ˆ |
|---------|---------|---------|
| åå…¸å¤ç±ç¶² | `shidian_simple.py` | `api_crawler.py` |
| å‚³çµ±éœæ…‹ç¶²ç«™ | `taoism_crawler.py` | `base_crawler.py` |
| ç¾ä»£SPAç¶²ç«™ | `api_crawler.py` | `selenium_crawler.py` |
| æœªçŸ¥ç¶²ç«™ | `page_analyzer.py` | `smart_crawler.py` |

### æ ¹æ“šéœ€æ±‚é¸æ“‡

| éœ€æ±‚ | æ¨è–¦å·¥å…· | èªªæ˜ |
|------|---------|------|
| å¿«é€Ÿçˆ¬å– | `shidian_simple.py` | æœ€ç°¡å–®ç›´æ¥ |
| æ‰¹é‡è™•ç† | `baopuzi_crawler.py` | å°ˆé–€è¨­è¨ˆ |
| èª¿è©¦åˆ†æ | `page_analyzer.py` | è©³ç´°åˆ†æ |
| å‹•æ…‹å…§å®¹ | `selenium_crawler.py` | è™•ç†JSæ¸²æŸ“ |
| ç¶œåˆè§£æ±º | `final_solution.py` | å¤šæŠ€è¡“æ•´åˆ |

## ğŸ“Š æ•ˆèƒ½å’Œé™åˆ¶

### æ•ˆèƒ½å°æ¯”

| å·¥å…· | é€Ÿåº¦ | æˆåŠŸç‡ | è³‡æºæ¶ˆè€— | é©ç”¨ç¯„åœ |
|------|------|--------|----------|----------|
| `shidian_simple.py` | â­â­â­â­â­ | â­â­â­â­â­ | â­â­â­â­â­ | åå…¸å¤ç±ç¶² |
| `api_crawler.py` | â­â­â­â­ | â­â­â­â­ | â­â­â­â­ | ç¾ä»£ç¶²ç«™ |
| `selenium_crawler.py` | â­â­ | â­â­â­â­â­ | â­â­ | å‹•æ…‹ç¶²ç«™ |
| `taoism_crawler.py` | â­â­â­ | â­â­â­ | â­â­â­â­ | å‚³çµ±ç¶²ç«™ |

### ä½¿ç”¨é™åˆ¶

- **ç¶²è·¯é™åˆ¶**ï¼šéœ€è¦ç©©å®šçš„ç¶²è·¯é€£æ¥
- **åçˆ¬èŸ²**ï¼šéƒ¨åˆ†ç¶²ç«™å¯èƒ½æœ‰åçˆ¬èŸ²æ©Ÿåˆ¶
- **æ³•å¾‹åˆè¦**ï¼šè«‹éµå®ˆç¶²ç«™ä½¿ç”¨æ¢æ¬¾
- **è³‡æºæ¶ˆè€—**ï¼šSeleniumå·¥å…·æ¶ˆè€—è¼ƒå¤šç³»çµ±è³‡æº

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è¦‹å•é¡Œ

#### 1. å®‰è£å•é¡Œ
```bash
# å¦‚æœpipå®‰è£å¤±æ•—
pip install --upgrade pip
pip install -r requirements.txt --no-cache-dir
```

#### 2. ç·¨ç¢¼å•é¡Œ
```python
# ç¢ºä¿ä½¿ç”¨UTF-8ç·¨ç¢¼
with open(file_path, 'w', encoding='utf-8') as f:
    f.write(content)
```

#### 3. ç¶²è·¯å•é¡Œ
```python
# å¢åŠ é‡è©¦æ¬¡æ•¸å’Œå»¶é²
crawler = BaseCrawler(delay_range=(3, 6))
response = crawler.make_request(url, max_retries=5)
```

#### 4. Seleniumå•é¡Œ
```bash
# å®‰è£ChromeDriver
# ä¸‹è¼‰ï¼šhttps://chromedriver.chromium.org/
# æˆ–ä½¿ç”¨webdriver-manager
pip install webdriver-manager
```

### èª¿è©¦æŠ€å·§

1. **æŸ¥çœ‹æ—¥èªŒ**ï¼šæª¢æŸ¥ `crawler.log` æª”æ¡ˆ
2. **ä¿å­˜èª¿è©¦æª”æ¡ˆ**ï¼šä½¿ç”¨ `debug_*.txt` æª”æ¡ˆåˆ†æ
3. **é€æ­¥æ¸¬è©¦**ï¼šå…ˆç”¨ `page_analyzer.py` åˆ†æç¶²ç«™
4. **ç¶²è·¯ç›£æ§**ï¼šä½¿ç”¨ç€è¦½å™¨é–‹ç™¼è€…å·¥å…·ç›£æ§è«‹æ±‚

## ğŸ“ˆ é€²éšé–‹ç™¼

### æ“´å±•æ–°ç¶²ç«™æ”¯æ´

1. **åˆ†æç¶²ç«™çµæ§‹**
```python
from page_analyzer import PageAnalyzer
analyzer = PageAnalyzer()
analyzer.deep_analyze("æ–°ç¶²ç«™URL")
```

2. **å»ºç«‹å°ˆç”¨çˆ¬èŸ²**
```python
from base_crawler import BaseCrawler

class NewSiteCrawler(BaseCrawler):
    def __init__(self):
        super().__init__()
        # è‡ªå®šç¾©åˆå§‹åŒ–
    
    def extract_content(self, url):
        # å¯¦ä½œå…§å®¹æå–é‚è¼¯
        pass
```

3. **æ¸¬è©¦å’Œå„ªåŒ–**
```python
# æ¸¬è©¦ä¸åŒçš„é¸æ“‡å™¨
selectors = ['.content', '#main', 'article']
for selector in selectors:
    elements = soup.select(selector)
    if elements:
        print(f"æ‰¾åˆ°å…§å®¹: {selector}")
```

### æ•´åˆAIç¿»è­¯

```python
def integrate_ai_translation(text):
    # å¯ä»¥æ•´åˆï¼š
    # 1. OpenAI API
    # 2. Google Translate API
    # 3. æœ¬åœ°AIæ¨¡å‹
    # 4. å…¶ä»–ç¿»è­¯æœå‹™
    
    translated = ai_translate_service(text)
    return translated
```

## ğŸ“š å­¸ç¿’è³‡æº

### ç›¸é—œæŠ€è¡“æ–‡æª”
- [Requestsæ–‡æª”](https://docs.python-requests.org/)
- [BeautifulSoupæ–‡æª”](https://www.crummy.com/software/BeautifulSoup/bs4/doc/)
- [Seleniumæ–‡æª”](https://selenium-python.readthedocs.io/)

### æœ€ä½³å¯¦è¸
1. **éµå®ˆrobots.txt**
2. **è¨­å®šé©ç•¶å»¶é²**
3. **è™•ç†ç•°å¸¸æƒ…æ³**
4. **è¨˜éŒ„è©³ç´°æ—¥èªŒ**
5. **æ¸¬è©¦ä¸åŒå ´æ™¯**

---

## ğŸ‰ ç¸½çµ

é€™å€‹çˆ¬èŸ²å·¥å…·é›†æä¾›äº†å¾åŸºç¤åˆ°é€²éšçš„å®Œæ•´è§£æ±ºæ–¹æ¡ˆï¼Œç‰¹åˆ¥é‡å°å¤ç±ç¶²ç«™é€²è¡Œäº†å„ªåŒ–ã€‚ç„¡è«–æ‚¨æ˜¯åˆå­¸è€…é‚„æ˜¯é€²éšç”¨æˆ¶ï¼Œéƒ½èƒ½æ‰¾åˆ°é©åˆçš„å·¥å…·ã€‚

**æ¨è–¦ä½¿ç”¨é †åº**ï¼š
1. ğŸ¥‡ `shidian_simple.py` - åå…¸å¤ç±ç¶²çš„æœ€ä½³é¸æ“‡
2. ğŸ¥ˆ `page_analyzer.py` - åˆ†ææ–°ç¶²ç«™çš„ç¬¬ä¸€æ­¥
3. ğŸ¥‰ `api_crawler.py` - è™•ç†ç¾ä»£ç¶²ç«™çš„é€šç”¨æ–¹æ¡ˆ

**æŠ€è¡“æ”¯æ´**ï¼š
- æŸ¥çœ‹ `practical_guide.md` ç²å–å¯¦ç”¨æŒ‡å—
- æª¢æŸ¥ `crawler.log` äº†è§£é‹è¡Œç‹€æ³
- ä½¿ç”¨èª¿è©¦æª”æ¡ˆåˆ†æå•é¡Œ

ç¥æ‚¨çˆ¬èŸ²æ„‰å¿«ï¼ ğŸ•·ï¸âœ¨