# 爬蟲模組快速參考

## 🚀 一分鐘上手

```python
from crawler import crawl_book

book = crawl_book('DZ1422')
```

## 📚 導入方式

```python
# 方式1: 標準導入（推薦）
from crawler import ShidianCrawler
crawler = ShidianCrawler()
book = crawler.crawl_book('DZ1422')

# 方式2: 便捷函數
from crawler import crawl_book
book = crawl_book('DZ1422')

# 方式3: 批量爬取
from crawler import batch_crawl
results = batch_crawl(['DZ1422', 'DZ1439'])
```

## 🎯 常用操作

### 爬取單本書籍

```python
from crawler import ShidianCrawler

crawler = ShidianCrawler(delay=2)
book = crawler.crawl_book('DZ1422')
```

### 不生成翻譯模板

```python
book = crawler.crawl_book('DZ1422', generate_templates=False)
```

### 批量爬取

```python
crawler = ShidianCrawler(delay=3)
results = crawler.batch_crawl(['DZ1422', 'DZ1439'])
```

### 自訂輸出目錄

```python
crawler.save_to_text_files(book, 'my_output/texts')
crawler.generate_translation_templates(book, 'my_output/translations')
```

## 📊 輸出結構

```
docs/
├── source_texts/書名/      # 原文
└── translations/書名/      # 翻譯模板

data/
└── crawled/               # JSON資料
```

## 🔧 參數設定

```python
# 延遲時間
ShidianCrawler(delay=2)     # 預設
ShidianCrawler(delay=3)     # 批量爬取建議

# 生成翻譯模板
crawl_book('DZ1422', generate_templates=True)   # 預設
crawl_book('DZ1422', generate_templates=False)  # 不生成
```

## 📝 API 速查

### ShidianCrawler 類別

```python
crawler = ShidianCrawler(delay=2)
book = crawler.get_book_info(book_id)
content = crawler.get_chapter_content(url, name)
book = crawler.crawl_all_chapters(book_info)
book = crawler.crawl_book(book_id, generate_templates=True)
crawler.save_to_json(book, output_dir)
crawler.save_to_text_files(book, output_dir)
crawler.generate_translation_templates(book, output_dir)
results = crawler.batch_crawl(book_ids, output_dir)
crawler.print_statistics(book)
```

### 便捷函數

```python
book = crawl_book(book_id, delay=2, generate_templates=True)
results = batch_crawl(book_ids, delay=3, output_dir='data/crawled')
```

## 🎯 書籍編號

從 URL 中找：
```
https://www.shidianguji.com/book/DZ1422
                                  ^^^^^^
```

常見編號：
- `DZ1422` - 枕中经
- `DZ1439` - 洞玄灵宝玉京山步虚经

## ❓ 常見問題

**Q: 爬取失敗？**  
A: 檢查網路、書籍編號、查看日誌 `data/logs/shidian_crawler.log`

**Q: 翻譯模板沒生成？**  
A: 確認 `generate_templates=True`

**Q: 如何批量爬取？**  
A: 使用 `batch_crawl(['DZ1422', 'DZ1439'])`

## 📚 完整文檔

- [README.md](README.md) - 模組總覽
- [快速開始.md](快速開始.md) - 詳細教學
- [README_更新說明.md](README_更新說明.md) - API文檔

## 🎉 範例

```python
#!/usr/bin/env python
# -*- coding: utf-8 -*-

from crawler import ShidianCrawler

crawler = ShidianCrawler()
book = crawler.crawl_book('DZ1422')

if book:
    crawler.print_statistics(book)
    print(f"✓ 完成: {book['title']}")
```

---

**快速參考版本**: v2.0  
**更新時間**: 2025-10-20
